
<!DOCTYPE html>
<html lang="en">
<head>

<style>
.star label:hover {
	text-shadow: 0 0 0 yellow;
}

.btn_wrap label:hover ~ label {
	text-shadow: 0 0 0 yellow;
}

.btn_wrap input[type=radio]:checked ~ label {
	text-shadow: 0 0 0 yellow;
}

.star {
	display: inline-block;
	border: 0;
	direction: rtl;
}

.star input {
	display: none;
}

.star label {
	font-size: 3em;
	color: transparent;
	text-shadow: 0 0 0 #f0f0f0;
}
	</style>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />
<title>Agency - Start Bootstrap Theme</title>
<!-- Favicon-->
<link rel="icon" type="image/x-icon" href="img/favicon.ico" />
<!-- Font Awesome icons (free version)-->
<script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js"
	crossorigin="anonymous"></script>
<!-- Google fonts-->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700"
	rel="stylesheet" type="text/css" />
<link
	href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700"
	rel="stylesheet" type="text/css" />
<!-- Core theme CSS (includes Bootstrap)-->
<link href="css/styles.css" rel="stylesheet" />
</head>
<body id="page-top">
	<!-- Navigation-->
	<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
		<div class="container">
			<a class="navbar-brand" href="/mainpage"><img
				src="/img/Hue_Mung.svg" alt="..." /></a>
			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
				aria-controls="navbarResponsive" aria-expanded="false"
				aria-label="Toggle navigation">
				Menu <i class="fas fa-bars ms-1"></i>
			</button>
			<div class="collapse navbar-collapse" id="navbarResponsive">
				<ul class="navbar-nav text-uppercase mx-auto py-4 py-lg-0">
					<li class="nav-item"><a class="nav-link">SiHyun</a></li>
					<li class="nav-item"><a class="nav-link">JunHo</a></li>
					<li class="nav-item"><a class="nav-link">EunJi</a></li>
					<li class="nav-item"><a class="nav-link">YoungSak</a></li>
					<li class="nav-item"><a class="nav-link">HeonGyu</a></li>
					<li class="nav-item"><a class="nav-link">Ara</a></li>
					<li class="nav-item"><a class="nav-link">YongSuk</a></li>
				</ul>
			</div>
			<!-- 로그인 상태 -->
			<div class="d-flex align-items-center"
				style="gap: 10px; color: white;">
				<!-- 로그인 전 -->
				<div style="margin-left: 10px;"
					th:if="${#strings.isEmpty(session.users)}">
					<a href="/login.do" class="btn btn-outline-light btn-sm">LOGIN</a>
				</div>

				<!-- 로그인 후 -->
				<div th:unless="${#strings.isEmpty(session.users)}">
					<b style="margin-left: 3px;">[[${session.users.userName}]]</b>님
					환영합니다. <a href="/logout.do" class="btn btn-outline-light btn-sm">LOGOUT</a>
				</div>

				<i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i> <i
					class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>
			</div>
		</div>
	</nav>

	<!-- company_info_detail -->
	<section class="page-section bg-light" id="portfolio">
		<form action="" method="POST" id="frm" name="frm">
			<!--   <input type="hidden" name="companyIdx" th:value="${detail.companyIdx}" />  -->

			<!-- 콘테이너 시작 -->
			<div class="container"
				style="max-width: 1920px; width: 100%; margin: 0 auto;">
				<!-- 업체명 사진/업체 정보/오시는길 시작-->
				<div class="text-center">
					<h2 class="section-heading text-uppercase company-name"
						style="font-size: 4em">[[${companydetail.companyName}]]</h2>
				</div>
				<div class="mb-3">
					<div class="picture">
						<img src="/download.do?companyIdx="
							th:attrappend="src=${reviewlist1.companyIdx}"></img>
					</div>
					</div>
				

			<!-- 업체정보 -->
			<div>
			<div class="content_wrap" style="display: flex; justify-content: center; margin-bottom: 20px;">
 			 <div style="display: flex; flex-direction: column; width: 600px; margin-top: 30px; margin-bottom: 30px;">
				<div style="display: flex; align-items: center; margin-bottom: 10px;">
 			 <label style="width: 65px; font-weight: bold;">업체정보</label>
  			  <div class="col" style="background-color: #fff; border-radius: 4px; padding: 10px;">
  			    [[${companydetail.companyInfo}]]
 			   </div>
 			 </div>
  
			<!-- 오시는길 -->
			<div style="display: flex; align-items: center; margin-bottom: 10px;">
 			 <label style="width: 65px; font-weight: bold;">오시는길</label>
  
 			   <div class="col" style="background-color: #fff; border-radius: 4px; padding: 10px;">
  			    [[${companydetail.companyAddress}]]
   			 </div>
 			 </div>
 			 <!-- 업체명 사진/업체 정보/오시는길 끝-->
 			 
 			 <!-- 평점 -->
  			 <div style="display: flex; align-items: center; margin-bottom: 10px;">
  			<label style="width: 65px; font-weight: bold;">평점</label>
 
    			<div class="col" style="background-color: #fff; border-radius: 4px; padding: 10px;">
    			  [[${averageStar.averageStar}]]
    			</div>
  			</div>
			</div>
			</div>
			
			<!-- 예약하기 & 예약확인 버튼 -->
				<div style="display: flex; justify-content: center; gap: 10px; margin: 30px;">
  						<a class="btn btn-primary" href="/apply123?companyIdx=" th:attrappend="href=${reviewlist1.companyIdx}">예약하기</a>
  						<a class="btn btn-primary" href="/applylist?companyIdx=" th:attrappend="href=${reviewlist1.companyIdx}">예약확인</a>
				</div>
			</div>
					
				<!-- 중간 구분선 -->
				<hr style="width: 60%; border: 0; height: 1px; background-color: #333; margin: 50px auto;">
					
				<!-- 리뷰 리스트 시작 -->
					<div class="text-center">
						<h2 class="section-heading text-uppercase">REVIEW</h2>
					</div>
					
					<div th:if="${#lists.size(reviewlist2)} > 0" th:each="sample : ${reviewlist2}">
						<div class="mb-3">
							<div class="content_wrap" style="display: flex; align-items: center; justify-content: center">
								
								<div class="container text-center" style="width: 30%; margin: 0 0 0 20px; ">
									<div class="row align-items-start" >
										<div class="col" style="background-color: #f4f4f5; text-align: left; border-radius: 7px; border: 1px solid #eee; display: flex
											; justify-content: center; height:50px;">
											
												<table style="width: 15%; font-weight:bold; ">
													<tr>
														<td th:text="${sample.reviewWriter}"></td>
													</tr>
												</table>
											
											<table style="width: 61%;">
												<tr>
													<td  th:text="${sample.reviewContents}"></td>
													</tr>
													</table>
													
													<!-- 별점 -->
													<table style="width: 24%;">
													<tr>
          											<td>
													<span>
														<th:block th:each="i : ${#numbers.sequence(1, sample.starIdx)}">
														⭐
														</th:block>
													<!-- 비어있는 별 -->
       													<th:block th:each="i : ${#numbers.sequence(1, 5 - sample.starIdx)}">
       										 			</th:block>
													</span>	
													</td>
													</tr>
											</table>
													</div>
														
									</div>
									
								</div>
								</div>
							</div>

						</div>	
						<ul style="display: flex; justify-content: center; padding-left: 0;">
							<li th:each="i : ${#numbers.sequence(1, pageCount, 1)}" style="list-style: none; margin: 0 5px;">
								<a style="color: black; text-decoration: none;" th:href="@{/companyDetail.do(companyIdx=${companyIdx}, currentPage=${i})}" >[[${i}]]</a></li>
						</ul>
				
					<!-- 리뷰 리스트 끝 -->
					
					<!-- 중간 구분선 -->
					<hr style="width: 60%; border: 0; height: 1px; background-color: #333; margin: 50px auto;">
					
					
					<!-- 리뷰등록 컨테이너 시작 -->
					<div class="reviewform_container"
						style="width: 100%; margin: 0 auto;">
						<div class="text-center">
						<h2 class="section-heading text-uppercase">리뷰등록</h2> 
						<!-- <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3>  -->
					</div>
					
						<!--리뷰 등록하는 부분(입력칸)-->
						<div class="content_wrap" style="display: flex; justify-content: center; margin-bottom: 20px;">
							<div style="display: flex; flex-direction: column; width: 600px;">
								<div style="display: flex; align-items: center; margin-bottom: 10px;">
									<label style="width: 65px; font-weight: bold;">작성자</label> 
									<!-- <input type="text" name="reviewWriter" class="form-control" style="flex: 1;" /> -->
									<div class="col" style="background-color: #fff; border-radius: 4px; padding: 10px 10px 10px 5px; ">
      									[[${session.users.userName}]]
    								</div>
								</div>
								<div style="display: flex; align-items: center; margin-bottom: 10px;">
									<label style="width: 65px; font-weight: bold;">내용</label>
									<textarea name="reviewContents" class="form-control" rows="5" style="flex: 1;"></textarea>
								</div>
							</div>
						</div>

						<!-- 별점 선택하는 영역 -->
						<div class="btn_wrap" style="display: flex; justify-content: space-evenly; margin-bottom: 15px;">
							<div class="star">
								<th:block th:each="c : ${star}">

									<input type="radio" name="starIdx" th:value="6-${c.starIdx}"
										id="" th:attrappend="id=${c.starIdx}" />
									<label for="" th:attrappend="for=${c.starIdx}">⭐</label>
								</th:block>
							</div>
						</div>
						<div class="btn_wrap btn-regist" style="margin-left: 48%;">
							<input type="hidden" name="companyIdx"
								th:value="${reviewlist1.companyIdx}" />
							<!--   
		                  	<a href="/insertCompanyReview?companyIdx=" class="btn btn-primary write" th:attrappend="href=${reviewlist1.companyIdx}">리뷰등록</a>
		                  	-->
							<input type="button" id="list"
								class="btn btn-primary btn-registration" value="등록하기" style="margin: 0 auto;" />
						</div>
					</div>
					<!-- 리뷰등록 컨테이너 끝 -->
				
		</form>
	</section>

	<!-- Footer-->
	<footer class="footer py-4">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-4 text-lg-start">
					&copy; Copyright <strong><span>애물단지</span></strong>. All Rights
					Reserved
				</div>
			</div>
		</div>
	</footer>

	<!-- Bootstrap core JS-->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<!-- Core theme JS-->
	<script src="js/scripts.js"></script>
	<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
	<!-- * *                               SB Forms JS                               * *-->
	<!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
	<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
	<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
	<script>
		// 문서 전체가 로딩되었을 때 실행되는 코드
		$(function() {
			// id 속성의 값이 list인 엘리먼트가 클릭되었을 때 동작을 정의
			$('#list').on('click', function() {
				let frm = $('#frm')[0];
				console.log(frm);
				frm.action = '/insertCompanyReview';
				frm.submit();
			});
		});
	</script>
</body>
</html>
